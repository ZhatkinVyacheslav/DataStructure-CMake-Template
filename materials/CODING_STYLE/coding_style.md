## Основные правила оформления кода на языке Си

Хорошо:
- простой, логичный, понятный;
- краткий, лаконичный;
- единообразный (стилистически единый).

Плохо:
- непонятный, заумный, сложный;
- запутанный, шумный, визуально нагруженный;
- длинный, повторяющийся;
- беспорядочный, пестрый.

**Главные правила:**
1. *Код должен быть удобен при отладке.*
2. *Код должен быть удобен для чтения.*

**Быстрое понимание кода способствует быстрому решению задач:**
- добавление новых возможностей;
- поиск и устранение проблем.

**Пиши код так, чтобы те, кто будет его сопровождать любили тебя, а не ненавидели. Сложная гибкая реализация гораздо лучше простого костыля.**

Описывай интерфейсы доступа, комментируй проблемные моменты. Не делай констант, от изменения которых придется переписывать весь код. Следи за безопасностью и отказоустойчивостью кода.

### Названия файлов

- Называйте файлы так, чтобы всем было ясно, какой файл за что отвечает.

Не следует называть файлы file1.c, mySUPER_COOL_header.h и т.д.
main.c — для файла с точкой входа (на начальных этапах изучения языка Си у вас проект только из него и состоит), graph_const.h — пример приемлемого названия для заголовочника с графическими константами.

- Названия файлов следует писать с маленькой буквы.

### Стартовый шаблон оформления кода

- Указываете своё авторство.
- Добавляйте краткое описание программы.
- Объявляйте переменные в начале функции.
- По возможности инициализируйте переменные при объявлении. 
- Придерживайтесь правильного выравнивания кода (далее будет подробнее об этом).

```C++
int counter = 0, start_position = 0, unknown_position = 0;
char input_string[32] = { 0 };
```
#### Шаблон

```C++
// Copyright 2021 FirstName LastName

/* 
* Сразу после имени автора должен идти блок комментариев,
* описывающий содержимое файла.
* Это может быть сокращённая постановка задачи.
*/

#include <stdio.h>

int main() {

	/*

	  your code

	*/

	return 0;
}

```

Примечание 0. После блока с подписью и описанием  подключаются дополнительные .h файлы (вспомогательные библиотеки) - блок #includes. Далее следуют определения с помощью директивы #defines (константы и макросы) - блок #defines.

Примечание 1. Идентификатор автора: файл должен начинаться с указания автора кода.

Примечание 2. В конце файла ставится пустая строчка.

### Названия переменных

- Все имена должны состоять из букв английского алфавита (прописных и/или строчных), цифр и знаков подчеркивания. 

```C++
float площадь, 2string, @mail;         // BAD
float S, string2, string_2, mail;      // GOOD
```

- Названия переменных передает назначение (осмысленные имена)

```C++
int a1, a2;           // BAD
int width, height;    // GOOD
```

- Названия переменных из одного слова записываются в нижнем регистре.
- Названия переменных из нескольких слов пишутся через разделитель нижнего подчёркивания _ или начиная каждое новое слово с большой буквы (кроме первого). В своём коде **рекомендуется придерживаться одного выбранного стиля** во всем тексте программы!

```C++
int Height, HeightOfTriangle, HEIGHTCIRCLE;        // BAD
int height, heightTriangle, height_circle;         // BAD (смесь стилей)
int height, heightTriangle, heightCircle;          // GOOD
int height, height_triangle, height_circle;        // GOOD
```

- Названия переменных имеют разумную длину, легко читаются, быстро вспоминаются, легко ищутся.

```C++
int variableForUserSelectionsInMenuItems;          // BAD
int userСhoice;                                    // GOOD
```


- Соблюдайте ограничение длины строки кода в 80 символов. Строки длиннее нужно дробить.
- Объявляйте переменные нового типа в новой строке.

```C++
int* p, *pp;                         // BAD

int* p;                              // GOOD
int** pp;

int height, base; double S;          // BAD

int height, base;                    // GOOD
double S;
```
- Названия переменных в циклах: i, j, k — стандартные названия для итераторов цикла.

```C++
for (h = 0; h < maxSizeOfHeight; h++) { ... }     // NOT GOOD, but if you give good discribe to variable may be	
for (i = 0; i < maxSizeOfHeight; i++) { ... }     // GOOD	
```

**Примечание. Не очень удачными можно считать идентификаторы написанные транслитом. Обращайтесь к онлайн-переводчику :) Бонус: со временем подтяните английский.**

### Комментарии

Пишите комментарии с умом!

Не надо комментировать каждую строчку кода.

Оптимальное решение — писать описания функций, если из аргументов и названия сложно понять весь её функционал. Для переменных — правила те же, в пояснении нуждаются только какие-то нелинейный вещи, где одного названия мало.

**ОТСЮДА ВЫВОД: чем лучше вы назовёте переменные и функции, тем меньше комментариев потребуется!!!**

На самом деле, в вопросе документации у вас есть полная свобода действий — надо лишь следить, чтобы комментариев было не много, но достаточно, чтобы человек, видящий ваш код в первый раз, не задавал вопросов.

**ВАЖНО!!!** Закомментированного кода в вашей ревью программе не должно быть. Если ваш коллега увидит такой код, вероятнее всего он удалит этот участок кода как "мусор" и "шум" в проекте.

### Пробелы

Рекомендация №1: Вместо символа табуляции (клавиша Tab) используйте 4 пробела. В некоторых IDE по умолчанию используются три пробела в качестве одного символа табуляции — это тоже нормально (количество пробелов можно легко настроить в соответствующих пунктах меню вашей IDE).

*Причиной использования пробелов вместо символов табуляции является то, что если вы откроете свой код в другом редакторе, то он сохранит правильные отступы, в отличие от использования символов табуляции.*

Рекомендация №2: Открытие и закрытие фигурных скобок функции должно находиться на одном уровне на отдельных строках.

```C++
if (condition) {                       // GOOD
	if (condition) {
		if (condition) {
			do_smthng();
		}
	}
} 

if (condition) {                       // BAD!!
if (condition) {
	if (condition) {
		do_smthng();
	}
}} 
```

Найти ошибку во втором случае расставления скобок становится сложной и долгой задачей:

```C++	
int main() {                                    // GOOD

	/*
	* very impotrant long code with open {
	*/


				}
			}
		}
	}
}

int main() {                                    // BAD!!

	/*
	* very impotrant long code with open {
	*/


		}
}
	}
}
}
```

Рекомендация №3: Каждая строчка функции должна быть с соответствующим отступом. "Лесенка" должна отражать структурную вложенность языковых конструкций. Рекомендуется **отступ не менее 2-х и не более 8-и пробелов**. Принятого отступа нужно придерживаться во всем тексте программы. Рекомендуется выполнять отступ в 4 пробела.

Рекомендация №4: Если длинная строка разбита на части с помощью определенного оператора (например, +), то этот оператор должен находиться в конце этой же строки, а не в начале следующей (так читабельнее).

Рекомендация №5: Используйте пробелы и пропуски строк для улучшения читабельности вашего кода. Отделяйте смысловые блоки.  Выравнивайте комментарии. 

Прочее:
- При перечислении идентификаторов после запятой "," ставить один пробел " ".
- Между переменными и операциями ставить один пробел " ".

```C++
double a, b;                                            // GOOD
printf("Сумма: %f. Разность: %f.", a + b, a - b);

double a,b;                                             // BAD
printf("Сумма: %f. Разность: %f.",a+b,a-b);

S=a + b;                                                // BAD
S = a+b;                                                // BAD
S = a + b;                                              // GOOD
```

### Выравнивание

#### Оператор IF

```C++
if (condition) { do_smthng(); } else          // BAD
{
	dont_do_something();
}

if (condition) {                              // GOOD!!!
	do_smthng(); 
} else {
	dont_do_something();
} 

if (condition)                                // MAY BE
{
	do_smthng(); 
} 
else
{
	dont_do_something();
}

if (condition) { do_smthng(); } else { dont_do_something(); }   // GOOD (for short if... else...)
```

Примечание. Последний приведённый подход будет работать только в случае, если у вас немного операторов в блоках «то» и «иначе». В противном случае ваш код может быть отклонён на этапе код-ревью.

Другие примеры выравнивания структур с if:
- Не стоит в одной структуре совмещать наличие и отсутствие скобок. Однако во вложенной структуре можно сменить стиль.

```C++
if (condition)                         // GOOD
	do_smthng();
else
	dont_do_something();

if (condition) {                       // GOOD
	do_smthng(); 
} else {
	dont_do_something();
} 

if (condition) {                       // BAD
	do_smthng(); 
}
else
	dont_do_something();

if (condition) {                       // GOOD
	if (condition)
		do_smthng();
	else
		dont_do_something();
} else {
	dont_do_something();
} 
```

#### Оператор SWITCH

```C++
switch (term) {                        // GOOD
 case term_1:
	do_smthng_1();
	break;
 case term_2:
	do_smthng_2();
	break;
 ...
 default:
	do_smthng_def();
}

switch (term) {                        // NOT GOOD, MAY BE for short code
 case term_1: do_smthng_1(); break;
 case term_2: do_smthng_2(); break;
 ...
 default: do_smthng_def();
}
```

Примечание. Перед каждым case ставится сдвиг на один пробел.

#### Оператор WHILE

```C++
while (condition) {                    // GOOD
  do_smthng();
}

do {                                   // GOOD
  do_smthng();
} while (condition);

while (condition) do_smthng();         // MAY BE for short code
```  

#### Оператор FOR

```C++
for (term; condition; term) {
  do_smthng();
}

for (term; condition; term) { do_smthng(); }

for (term; condition; term)
  do_smthng();

for (term; condition; term) do_smthng();
```

### Прочие важные правила

- Названия макросов и макрофункций пишутся капсом, слова в названиях отделяются друг от друга нижним подчеркиванием. Все идентификаторы должны выбираться из соображений читаемости и максимальной семантической нагрузки.

```C++
#define MAX_ARRAY_SIZE   100
#define INCORRECT_VALUE  -1
#define EPS              0.0001
```

- Запрещается использовать «магические», числа, значения константы.

```C++
S = 3.14 * pow(r, 2);               // BAD

float pi = 3.14;                    // GOOD
S = pi * pow(r, 2);
```
Также можно вынести эти значения в макросы.
	
```C++
#define PI 3.14                     // GOOD

int main() {
    ...
    S = pi * pow(r, 2);
}


int height, base; double S;        // BAD

int height, base;                  // GOOD
double S;
```


Примечание. Значение должны быть вынесены в именованные константы, при этом обязательно указание единиц измерения констант (если применимо), а также - для неочевидных констант - источник их значения (например, "значение задаётся в ТЗ" или "подобрано экспериментально").

P.S. Для тех кто планирует устраиваться на работу: так же не следует забывать, что в каждой компании, как правило, используется свой Code Style, и ему нужно следовать. В противном сулучае можно получить как минимум укоризненные взгляды товарищей-разрабов или втык от начальства.
